"use strict";var _extends=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){r[n]=e[n]}}}return r};(function(){Array.prototype.find=Array.prototype.find||(Array.prototype.find=function(r){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var t,e=Object(this),n=e.length>>>0,i=arguments[1],a=0;n>a;a++)if(t=e[a],r.call(i,t,a,e))return t;return void 0});var r=[];var t={hash:"#!",add:function u(n){if(!n||!n.name){throw"Please specify a state name";return}var i=e(n);if(i)i=n;else{if(n.url&&n.url[0]=="/")n.url=n.url.substr(1);r.push(n)}t.trigger("add",i);return this},remove:function f(e){var n=undefined;r=r.filter(function(r){if(r.name!=e)return r;else n=r});t.trigger("remove",n);return this},go:function s(r,n,i){if(!t.active||!r)return;var o=e(r);if(!o){throw"State '"+r+"' has not been configured";return}if(n)o.params=n;var u=r.split(".");u=u.map(function(r,t){if(t>0){return u.slice(0,t).join(".")+"."+r}else{return r}});u.forEach(function(r,t){if(t<u.length){var n=e(r);o=_extends({},n,o)}});if(typeof o.resolve=="function"){var f=o.resolve();if(typeof f.then=="function")f.then(function(){return a(o,i)})}else{a(o,i)}return this},start:function l(){t.active=true;if(window.location.hash){var r=n(window.location.hash.replace(t.hash+"/",""));if(r)t.go(r.name)}else if(t.hash===""){var e=n(window.location.pathname.slice(1));if(e)t.go(e.name)}window.addEventListener("popstate",i);t.trigger("start");return this},stop:function c(){t.active=false;window.removeEventListener("popstate",i);t.trigger("stop");return this},current:undefined,active:false};function e(t){return r.find(function(r){return r.name==t})}function n(t){var e=r.find(function(r){return r.url==t});if(e)return e;return r.find(function(r){if(!r.url)return false;var e=r.url.split("/");var n=t.split("/");r.params=r.params||{};for(var i=0;i<e.length;i++){var a=e[i];var o=n[i];if(a[0]==":"){r.params[a.substr(1)]=o}else if(a!=o){return false}}return true})}function i(r){if(r.state)t.go(r.state.name,r.state.params,true)}function a(r,e){if(typeof history.pushState!="undefined"&&r.history!=false){if(!history.state||!e){var n={};for(var i in r){if(r.hasOwnProperty(i)&&typeof r[i]!=="function"){n[i]=r[i]}}history.pushState(n,null,o(r))}}var a=t.current;t.current=r;t.trigger("go",r,a)}function o(r){if(r.params){var e=r.url.split("/");var n=e.map(function(t){if(t[0]!=":")return t;return r.params[t.substr(1)]}).filter(function(r){return r?true:false}).join("/");return t.hash+"/"+n}return r.hasOwnProperty("url")?t.hash+"/"+r.url:null}riot.observable(t);riot.mixin("rg.router",{init:function p(){var r=this;this.router.on("go",function(){return r.update()})},router:t});if(!window.rg)window.rg={};window.rg.router=t})();